/*==============================================================================
 Program: data_refine.do
 Creator: Lin
 Created: 2020/03/13
 Updated: 
 Purpose: Taiwan thermal_inversions data (以2010年為例) 
==============================================================================*/
capture log close
clear all
set more off

global dir = "D:/00_work/07_GWR_Ghana"


/*==============================================================================
前置作業1: step0_sheet1.do
此do file是要做出可將nc4 run出來的資料對應其該有的緯度、經度的dta file
==============================================================================*/
do "$dir/programs/step0_sheet1.do"


/*==============================================================================
前置作業2: step0_dist_coordinates.do
將districts 運用真實經緯度換算成可對應到 nc4 file 的經緯度
==============================================================================*/
do "$dir/programs/dist_coordinates.do"




/*==============================================================================
Step0:
利用python將NC4檔資料存成excel
==============================================================================*/
*thermal_inversions.py


/*==============================================================================
Step1:
1.將nc4 run出來的資料更改變數名稱
2.產生num變數用來對應 sheet1.do 做出的dta file
3.將sheet1.do 做出的dta file 用 num merge到Step1做出的資料
  merge 1:1 num using sheet1.dta
==============================================================================*/
do "$dir/programs/step1.do"


/*==============================================================================
Step2:
1.將Step2做出的資料用 lat lon merge到districts(dist_coordinates.dta)
2.產生日、月變數
==============================================================================*/
do "$dir/programs/step2.do"


/*==============================================================================
Step3:
append data to year
==============================================================================*/
do "$dir/programs/step3.do"


/*==============================================================================
Step4:
產生各氣壓下的溫度
==============================================================================*/
do "$dir/programs/step4.do"


/*==============================================================================
Step5:
1.產生年變數
2.做出districts開始有氣溫的第一層氣壓層及第二層
==============================================================================*/
do "$dir/programs/step5.do"


/*==============================================================================
Step6:
1.絕對溫度改攝氏
2.修改氣壓層
3.計算月資料
==============================================================================*/
do "$dir/programs/step6.do"








